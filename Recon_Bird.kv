<ActionBar>:
    padding:'2sp'
    canvas:
        Color:
            rgba: self.background_color
        BorderImage:
            pos:self.pos
            size:self.size
            source:

<exit_page1>:
    canvas:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            size: self.size
            pos: self.pos

    MDCard:
        size_hint: None,None
        pos_hint: {"center_x":.5,"center_y":.57}
        size: 800,1400
        #elevation:15
        padding:25
        spacing:25
        orientation: 'vertical'

        canvas:
            Color:
                rgba: (0, 0, 0, 1)
            Rectangle:
                size: self.size
                pos: self.pos

        MDLabel:
            id: label
            markup:True
            text: "[b][color=#E32937]Sure want to exit?[/color][b]"
            font_size: 78
            halign: "center"
            size_hint_y:.5
            height: self.texture_size[1]
            pos_hint: {"center_x":.5, "center_y":.5}
            padding_y:15

        Image:
            id: image
            source: 'exit-door.png'
            center: self.parent.center

        MDRoundFlatButton:
            text:"[color=#1E42F6] Yes [/color]"
            font_size:60
            pos_hint: {"center_x":.5}
            on_press:
                root.win_button_yes()

        MDRoundFlatButton:
            text:"[color=#1E42F6] No [/color]"
            font_size:60
            pos_hint: {"center_x":.5}
            on_press:
                root.win_button_no()
                root.manager.transition.direction = 'right'


<exit_page2>:
    canvas:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            size: self.size
            pos: self.pos

    MDCard:
        size_hint: None,None
        pos_hint: {"center_x":.5,"center_y":.57}
        size: 800,1400
        #elevation:15
        padding:25
        spacing:25
        orientation: 'vertical'

        canvas:
            Color:
                rgba: (0, 0, 0, 1)
            Rectangle:
                size: self.size
                pos: self.pos

        MDLabel:
            id: label
            markup:True
            text: "[b][color=#E32937]Sure want to exit?[/color][b]"
            font_size: 78
            halign: "center"
            size_hint_y:.5
            height: self.texture_size[1]
            pos_hint: {"center_x":.5, "center_y":.5}
            padding_y:15

        Image:
            id: image
            source: 'exit-door.png'
            center: self.parent.center

        MDRoundFlatButton:
            text:"[color=#1E42F6] Yes [/color]"
            font_size:50
            pos_hint: {"center_x":.5}
            on_press:
                root.win_button_yes()

        MDRoundFlatButton:
            text:"[color=#1E42F6] No [/color]"
            font_size:50
            pos_hint: {"center_x":.5}
            on_press:
                root.win_button_no()
                root.manager.transition.direction = 'right'


<Authentication_Window>:

    canvas:
        Color:
            rgba: (0, 0, 0, 1)
        Rectangle:
            size: self.size
            pos: self.pos


    ActionBar:
        pos:(0,1470)
        size_hint: (1,.05)
        background_color: (0,0,0,.8)

        ActionView:
            id: view
            ActionPrevious:
                with_previous:False
                app_icon:'log-out.png'
                on_release:
                    root.open_exit_page()

                disabled:False


    MDCard:
        size_hint: None,None
        pos_hint: {"center_x":.5,"center_y":.5}
        size: 1200,1250
        #elevation:30
        padding:25
        spacing:25
        orientation: 'vertical'

        canvas:
            Color:
                rgba: 0, 0, 0, 0.87
            Rectangle:
                size: self.size
                pos: self.pos

        MDLabel:
            id: label
            markup:True
            text: "[b][color=#1E42F6]Welcome to Recon_Bird[/color][/b]"
            font_size: 55
            halign: "center"
            size_hint_y:.5
            height: self.texture_size[1]
            pos_hint: {"center_x":.5, "center_y":.5}
            padding_y:15

        MDTextField:
            id: text_field
            markup:True
            hint_text: "Enter the key"
            icon_right: 'key'
            size_hint_x: 1
            width:400
            font_size: 40
            #pos_hint: {"center_x":1}
            password:True

        MDRoundFlatButton:
            text:"[color=#150CCD]Authenticate[/color]"
            font_size:40
            pos_hint: {"center_x":.5}
            on_press:
                root.validate()

        Image:
            id: gif
            source: 'auth2.gif'
            center: self.parent.center
            size: 500, 500
            allow_stretch: True
            anim_delay: -1
            anim_loop: 1


<flight_popUp>:
    size_hint: .6,.7
    auto_dismiss: True
    title: 'Flight-Controls'
    background_color: (1,1,1,0.5)
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        space_x: self.size[0]/3
        Label:
            markup:True
            font_size:50
            text: "[color=#25D709][b]Movements and Yaw[/b]"
        Image:
            source: 'wasdPixel.png'
            center_x: self.parent.center_x
            center_y: self.parent.center_y
        Label:
            markup:True
            font_size:50
            text: "[color=#25D709][b]Hover and Turn[/b]"
        Image:
            size_hint: .5,.5
            pos_hint: {"x":.25,"y":.5}
            source: 'arrowKeys.png'
            center_x: self.parent.center_x
            center_y: self.parent.center_y

        Label:
            markup:True
            font_size:50
            text: "[color=#25D709][b][i]SWITCH -> Enable_Control[/i][/b]"

        Button:
            background_color:(0,0,0,1)
            markup:True
            text: "[color=#2C38EE][b][u]Close[/u][/b] 'ESCAPE'[/color]"
            size_hint: .45,.45
            pos_hint: {"x":.28,"y":.5}
            on_press:root.dismiss()


<detect_pop_Up>:
    size_hint: .4,.3
    auto_dismiss: True
    title: 'Please wait...'
    background_color: (0,0,0,1)
    canvas:
        Color:
            rgb: (0,0,1,1)
        Line:
            width: 1
            rectangle: self.x+5, self.y+5, self.width-10, self.height-10

    BoxLayout:
        orientation: "vertical"
        spacing: 10
        space_x: self.size[0]/3
        Label:
            size_hint: .6,.8
            markup: True
            text: '[b][size=35][color=#1304F5]Performing Detection..[/color][/size][/b]'

        Image:
            id: detect_gif
            source: 'WIP.png'
            center: self.parent.center
            #size: 500, 500
            #allow_stretch: True
            #anim_delay: -1
            #anim_loop: 1

<Background>:
    BoxLayout:
        id: main_win
        orientation: "vertical"
        spacing: 10
        space_x: self.size[0]/3

        canvas.before:
            Color:
                rgba: (.7, .7, .7, 1)
            Rectangle:
                source:'leather.jpeg'
                size: root.width, root.height
                pos: self.pos

        ActionBar:
            pos:(0,1170)
            size_hint: (1,.1)
            background_color: (0.4,0.4,0.4,1)

            ActionView:
                id: view2
                ActionPrevious:
                    with_previous:False
                    app_icon:'log-out.png'
                    on_release:
                        root.open_exit_page()

                    disabled: root.exit_bool

        GridLayout:
            padding: 10,10
            cols:2

            TelloCamera:
                id: camera
                size: self.size
                center_x: self.parent.center_x
                center_y: self.parent.center_y

            GridLayout:
                padding:10,10
                cols:1

                Label:
                    id: battery_label
                    markup: True

                    color: (0,1,0,0.8)

                    #size_hint: .5, 1
                    #pos_hint: {"center_x":.5,"center_y":.6}

                    canvas.before:
                        Color:
                            rgba: (1,0,0,1)
                        Ellipse:
                            size: [self.width-540, self.height-95]
                            pos: self.width+310, self.height+818

                        Color:
                            rgba: (0,1,0,1)
                        Ellipse:
                            size: [self.width-540, self.height-95]
                            pos: self.width+310, self.height+818
                            angle_end: root.label_angle

                        Color:
                            rgba: (0.80,0.80,0.80,1)
                        Ellipse:
                            size: [self.width-560, self.height-115]
                            pos: self.width+320, self.height+827

                    Image:
                        source: 'lighting.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                GridLayout:
                    padding:2,2
                    cols:2
                    Button:
                        id: control_button
                        background_color: (0,0,0,0)
                        animated_color: (0,0,1,1)
                        blink_size: 0

                        size_hint: .45, .45
                        pos_hint: {"x":.45, "y":.3}

                        on_press:
                            root.button_def()
                            root.flight_popup()
                            root.control_sound()

                        on_release:
                            root.control_button(self)

                        canvas.before:
                            Color:
                                rgba: self.animated_color
                            Rectangle:
                                size: self.blink_size, self.blink_size
                                pos: self.pos[0] + self.pos[0]/2. - self.blink_size/2. -125, self.pos[1] + self.pos[1]/2. - self.blink_size/2.-220
                            Line:
                                width: 2
                                rectangle: self.x+50, self.y+30, self.width-100, self.height-50

                        Image:
                            source: 'remote-control.png'
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y

                    Switch:
                        id: my_switch
                        on_active:
                            root.control_enable()
                            root.switch_sound()
                        size_hint: None, 1
                        width: '100dp'
                        blink_size:0
                        pos: self.pos
                        canvas.before:
                            Color:
                                rgba: (0,1,0,1)
                            Rectangle:
                                size: self.blink_size, self.blink_size
                                pos: self.pos[0] + self.pos[0]/2. - self.blink_size/2. -20 , self.pos[1] + self.pos[1]/2. - self.blink_size/2.-240
                            Line:
                                width: 2
                                rectangle: self.x, self.y+30, self.width, self.height-50


        GridLayout:
            padding: 10, 10
            cols: 2
            Button:
                id: power_button
                background_color: (0, 0, 0, 0.2)
                animated_color: (0,1,0,0.6)
                blink_size: 0
                size_hint: 1, 1
                pos_hint: {"x":0.4, "y":1}

                disabled: not root.power_button_enabled

                on_press:
                    root.drone_sound()
                    root.drone_animate()

                on_release:
                    root.power_button_disable()

                canvas.before:
                    Color:
                        rgba: self.animated_color
                    Rectangle:
                        size: self.blink_size, self.blink_size
                        pos: self.pos[0] + self.pos[0]/2. - self.blink_size/2. + 405 , self.pos[1] + self.pos[1]/2. - self.blink_size/2.
                    Line:
                        width: 2
                        rectangle: self.x+210, self.y+50, self.width-420, self.height-100

                Image:
                    size_hint: 1, 1
                    pos_hint: {"x":0.4, "y":1}
                    source: 'on-button.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y


            Button:
                id: drone_button
                background_color: (0,0,0,0.2)
                animated_color: (0,0,1,1)
                blink_size: 0
                on_press:
                    root.drone_func()
                    root.drone_power_down()

                on_release:
                    root.drone_button_disable(self)
                    root.power_button_enable()

                disabled: root.power_button_enabled

                canvas.before:
                    Color:
                        rgba: self.animated_color
                    Rectangle:
                        size: self.blink_size, self.blink_size
                        pos: self.pos[0] + self.pos[0]/2. - self.blink_size/2.-5 , self.pos[1] + self.pos[1]/2. - self.blink_size/2.
                    Line:
                        width: 2
                        rectangle: self.x+210, self.y+50, self.x-430, self.height-100

                Image:
                    source: 'drone.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y


            Button:
                id: camera
                background_color: (0,0,0,0.2)
                animated_color: (0,1,0,0.7)
                blink_size: 0
                on_press:
                    root.capture()
                    root.capture_sound()
                    root.detect_animate()

                on_release:
                    root.blink_button(self)

                canvas.before:
                    Color:
                        rgba: self.animated_color
                    Rectangle:
                        size: self.blink_size, self.blink_size
                        pos: self.pos[0] + self.pos[0]/2. - self.blink_size/2.+ 406 , self.pos[1] + self.pos[1]/2. - self.blink_size/2.+170
                    Line:
                        width: 2
                        rectangle: self.x+210, self.y+50, self.width-420, self.height-100
                Image:
                    source: 'camera-3.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y

            Button:
                id: detect_button
                background_color: (0,0,0,0.2)
                animated_color: (1,0,0,0.7)
                on_press:
                    root.process_button_click()
                on_release:
                    root.display()

                disabled: root.click_disabled

                #size_hint: .1, .1
                #pos_hint: {"x":.45, "y":.3}

                canvas.before:
                    Color:
                        rgba: self.animated_color

                    Line:
                        width: 2
                        rectangle: self.x+210, self.y+50, self.x-430, self.height-100

                canvas.after:
                    Color:
                        rgba: (0, 1, 0, 0.7)

                Image:
                    source: 'detect.png'
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y